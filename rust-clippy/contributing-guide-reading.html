<!DOCTYPE html><html><head><link rel="icon shortcut" href="/favicon.png"/><meta http-equiv="Content-Type" content="text/html" charSet="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Contributing to Clippy を読む</title><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/f65c36dfe6831194.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f65c36dfe6831194.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f494479e1a89519f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f494479e1a89519f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-243158fe274fe2cd.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-f32d95d8c858a7b4.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9bbeff8c38d04d52.js" defer=""></script><script src="/_next/static/chunks/226-ba96346710649ee0.js" defer=""></script><script src="/_next/static/chunks/pages/%5Bbook%5D/%5B...article%5D-6fcfac185874bf64.js" defer=""></script><script src="/_next/static/YUhJxocG7btAlZOyC1lft/_buildManifest.js" defer=""></script><script src="/_next/static/YUhJxocG7btAlZOyC1lft/_ssgManifest.js" defer=""></script><script src="/_next/static/YUhJxocG7btAlZOyC1lft/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class=""><main class=""><div class="flex"><div style="width:300px;display:block" class="h-screen fixed bg-gray-100"><nav class="maido-list pt-5 pl-3"><ul>
<li><a href="/rust-clippy/">rust-lang/rust-clippyをさわる</a></li>
<li><a href="/rust-clippy/contributing-guide-reading/index/">Contributing to Clippy を読む</a></li>
<li><a href="/rust-clippy/issue-pr-reading/index/">IssueとPRを読む</a></li>
</ul>
</nav><div id="list-resize-handler" style="cursor:move;left:295px;width:5px;transform:translate(0px,0px)" class="top-0 bottom-0 h-screen fixed react-draggable"></div></div><div style="padding-left:300px;padding-right:300px" class="w-full h-screen"><div class="w-full relative flex space-x-4 justify-center pb-5"><div class="pl-2 pt-7 left-0"><button class="font-medium"><img src="/left-arrow.svg" alt="toggle" width="30" height="30"/></button></div><div class="w-full text-center pt-5"><h1 class="text-3xl underline"><a href="/">pub.docs</a></h1></div><div class="pr-2 pt-7 right-0"><button class="text-xl"><img src="/right-arrow.svg" alt="toggle" width="30" height="30"/></button></div></div><div class="maido-content px-5 pb-20"><h1 id="contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80" tabindex="-1"><a class="header-anchor" href="#contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80">#</a> <a href="https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#writing-code">Contributing to Clippy</a> を読む</h1>
<p><strong>読んで分かったこと</strong></p>
<ul>
<li>questionはZulipの #clippy で尋ねてみるのがよさそう。Zulipは<a href="https://zulip-archive.rust-lang.org/">archive</a>がとられていて、見れるようになっている</li>
<li><a href="https://www.rust-lang.org/policies/code-of-conduct">Rust Code of conduct</a>に従うこと。日本語訳部分読んでみたけど気を配ろうという人間として普通の振る舞いだった。でも文化の違いとかあるだろうし気を配らないと。</li>
<li><a href="https://github.com/rust-lang/rust-clippy/blob/master/doc/basics.md">Basics for hacking on Clippy</a>とかいう初心者向けのドキュメントがあり親切さにビビる。</li>
<li><a href="https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#how-clippy-works">How Clippy works</a>が本丸っぽい。</li>
<li><a href="https://github.com/rust-lang/rust-clippy/blob/master/doc/adding_lints.md">Adding a new lint</a> が今回やろうとしているlinterの追加に一番近い。</li>
</ul>
<p><strong>手を動かしてみる</strong></p>
<p>clippyを <code>git clone</code> してくる</p>
<p><a href="https://github.com/rust-lang/rust-clippy/blob/master/doc/adding_lints.md">Adding a new lint</a> によるとまずテストを追加するとのことなので、追加して <code>TESTNAME=zzz_test_rule cargo uitest</code> を走らせる</p>
<p><img src="/assets/home/runner/work/pub.docs/pub.docs/content/rust-clippy/contributing-guide-reading/index.md/image-3.jpg" alt="image-3"></p>
<p>上のように、linterそんなのないよというエラーで落ちる。正常に動いている。次に中身を追加と期待されるstderrを追加する。</p>
<p>中身を追加して <code>TESTNAME=zzz_test_rule cargo uitest</code> 走らせたらエラー。<code>declare_clippy_lint!</code> は <code>declare_tool_lint</code> が、<code>declare_lint_pass!</code> は <code>declare_lint_pass</code> から来ているのでこれらをimportする。</p>
<p>ここでよく分からないので実例を見てみる。行数をtokeiを使って見た。<code>tokei . --files --sort lines | grep -E '\./[A-Za-z_]+\.rs'</code></p>
<p>どうやら <a href="https://github.com/rust-lang/rust-clippy/blob/master/clippy_lints/src/temporary_assignment.rs">temporary_assignment.rs</a> が短いようなので見に行く。</p>
</div></div><div style="width:300px;display:block" class="h-screen fixed bg-gray-100 right-0"><nav class="maido-toc pt-5 pl-3"><nav class="table-of-contents"><ol><li><a href="#contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80"> Contributing to Clippy を読む</a></li></ol></nav></nav><div id="toc-resize-handler" style="cursor:move;right:295px;width:5px;transform:translate(0px,0px)" class="absolute top-0 bottom-0 h-screen fixed react-draggable"></div></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"projectTitle":"pub.docs","meta":{"title":"Contributing to Clippy を読む","date":"2022-02-03T21:50:49+09:00","draft":false},"list":"\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/rust-clippy/\"\u003erust-lang/rust-clippyをさわる\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/rust-clippy/contributing-guide-reading/index/\"\u003eContributing to Clippy を読む\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/rust-clippy/issue-pr-reading/index/\"\u003eIssueとPRを読む\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","content":"\u003ch1 id=\"contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80\" tabindex=\"-1\"\u003e\u003ca class=\"header-anchor\" href=\"#contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80\"\u003e#\u003c/a\u003e \u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#writing-code\"\u003eContributing to Clippy\u003c/a\u003e を読む\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003e読んで分かったこと\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003equestionはZulipの #clippy で尋ねてみるのがよさそう。Zulipは\u003ca href=\"https://zulip-archive.rust-lang.org/\"\u003earchive\u003c/a\u003eがとられていて、見れるようになっている\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.rust-lang.org/policies/code-of-conduct\"\u003eRust Code of conduct\u003c/a\u003eに従うこと。日本語訳部分読んでみたけど気を配ろうという人間として普通の振る舞いだった。でも文化の違いとかあるだろうし気を配らないと。\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/doc/basics.md\"\u003eBasics for hacking on Clippy\u003c/a\u003eとかいう初心者向けのドキュメントがあり親切さにビビる。\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#how-clippy-works\"\u003eHow Clippy works\u003c/a\u003eが本丸っぽい。\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/doc/adding_lints.md\"\u003eAdding a new lint\u003c/a\u003e が今回やろうとしているlinterの追加に一番近い。\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003e手を動かしてみる\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eclippyを \u003ccode\u003egit clone\u003c/code\u003e してくる\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/doc/adding_lints.md\"\u003eAdding a new lint\u003c/a\u003e によるとまずテストを追加するとのことなので、追加して \u003ccode\u003eTESTNAME=zzz_test_rule cargo uitest\u003c/code\u003e を走らせる\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/home/runner/work/pub.docs/pub.docs/content/rust-clippy/contributing-guide-reading/index.md/image-3.jpg\" alt=\"image-3\"\u003e\u003c/p\u003e\n\u003cp\u003e上のように、linterそんなのないよというエラーで落ちる。正常に動いている。次に中身を追加と期待されるstderrを追加する。\u003c/p\u003e\n\u003cp\u003e中身を追加して \u003ccode\u003eTESTNAME=zzz_test_rule cargo uitest\u003c/code\u003e 走らせたらエラー。\u003ccode\u003edeclare_clippy_lint!\u003c/code\u003e は \u003ccode\u003edeclare_tool_lint\u003c/code\u003e が、\u003ccode\u003edeclare_lint_pass!\u003c/code\u003e は \u003ccode\u003edeclare_lint_pass\u003c/code\u003e から来ているのでこれらをimportする。\u003c/p\u003e\n\u003cp\u003eここでよく分からないので実例を見てみる。行数をtokeiを使って見た。\u003ccode\u003etokei . --files --sort lines | grep -E '\\./[A-Za-z_]+\\.rs'\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eどうやら \u003ca href=\"https://github.com/rust-lang/rust-clippy/blob/master/clippy_lints/src/temporary_assignment.rs\"\u003etemporary_assignment.rs\u003c/a\u003e が短いようなので見に行く。\u003c/p\u003e\n","toc":"\u003cnav class=\"table-of-contents\"\u003e\u003col\u003e\u003cli\u003e\u003ca href=\"#contributing-to-clippy-%E3%82%92%E8%AA%AD%E3%82%80\"\u003e Contributing to Clippy を読む\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e"},"__N_SSG":true},"page":"/[book]/[...article]","query":{"book":"rust-clippy","article":["contributing-guide-reading"]},"buildId":"YUhJxocG7btAlZOyC1lft","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>